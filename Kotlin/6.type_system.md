# Type System

## Nullability
 
 ### ?를 붙여서 null 사용을 명시 해야한다.

 > fun strSafe(s:String?) 
 * null 이 될수 있는 타입은 메서드를 직접 호출 할 수 없다
 * null 이 될수 있는 타입의 값을 널이 될수 없는 타입 파라미터로 넘길 수 없다.

 ### 안전한 호출 ?.

 * null 검사와 메서드 호출을 한번에 수행
 > s?.toUpperCase() null 이 아니면 toUpperCase를 수행, null 이면 null 리턴

 ### 엘비스 연산자 ?:
  * null 대시 사용할 디폴트 값 지정
  > val elvisStr : String = s ?: ""
  * throw, return 연산도 식이기 때문에 엘비스 연산자 우항에 넣을 수 있다.
  > val address = person.company?.address ?: throw IllegalArgumentException("No address")

## 안전한 캐스트 as?
 * as 로 타입 변환시 ClassCastException이 발생 할 수 있다
 * as? 로 캐스트 하면 변환할 수 없으면 null을 반환 한다.
 * 앨비스 연산자와 함께 사용하여 캐스트 실패 했을 경우 처리 할 수 있다.
 > val person = o as? Person ?: return false

 ## non null assertion !!
 * 강제로 널이 될 수 없는 타입으로 변경 한다.
 * 실제 null 일 경우 NullPointerException이 발생한다.
 * 한줄에 !! 여러번 쓰는일을 피하자. (NPE 발생 시 stacktrace 에서 라인 정보만 알려준다.)

 ## let
  * 원하는 식의 결과가 널인지 체크하고 넣는 작업을 한꺼번에 할 수 있다.
  * null 이 아닐 경우 람다가 실행 되고, null 일 경우 아무일도 일어나지 않는다.
  * null 이 아닌 값을 파라미터에 null을 지원하는 변수를 넣을때 유용하다.
  > email?.let{sendEmail(it)}

  ## late initialized 프로퍼티
  * 일반적으로 생성자에서 모든 프로퍼티를 초기화 해야 한다.
  * lateinit 붙이면 된다.
  * lateinit은 항상 var 여야 한다.
  * 초기화 이전 접근하면 "lateinit property xxx has not been initialized" 에러 발생
  > lateinit var person: Person